---
layout: default
---
<section class="archive-header">
  <h1>Archive</h1>
  <p>Leaf through every entry, or filter by pillar or topic.</p>
</section>
<section class="filter-bar" aria-label="Archive filters">
  <div class="filter-summary" id="filter-summary">Showing all posts.</div>
</section>
<section class="archive-list">
  {% assign sorted_posts = site.posts | sort: 'date' | reverse %}
  {% for post in sorted_posts %}
  <article class="post-card" data-pillar="{{ post.pillar }}" data-topics="{{ post.topics | join: ',' }}">
    <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
    <p class="post-meta">{{ post.date | date: '%B %d, %Y' }} &mdash; {{ post.pillar | capitalize }}</p>
    <p class="post-excerpt">{{ post.excerpt | strip_html | truncate: 160 }}</p>
    <div class="tag-row">
      <span class="tag-pill">{{ post.pillar | capitalize }}</span>
      {% for topic in post.topics %}
      <span class="tag-pill">{{ topic }}</span>
      {% endfor %}
    </div>
  </article>
  {% endfor %}
</section>
<nav class="pagination" aria-label="Pagination">
  <p class="pagination-note">Older issues rest at the bottom of this scroll.</p>
</nav>
<script>
(function() {
  const params = new URLSearchParams(window.location.search);
  const tagParam = params.get('tag');
  const topicParam = params.get('topic');
  const cards = Array.from(document.querySelectorAll('.post-card'));
  const summary = document.getElementById('filter-summary');
  if (!cards.length) return;
  let label = 'Showing all posts.';
  if (tagParam) {
    cards.forEach(card => {
      const matches = card.dataset.pillar === tagParam;
      card.hidden = !matches;
    });
    label = 'Filtered by pillar: ' + tagParam;
  }
  if (topicParam) {
    cards.forEach(card => {
      const topics = card.dataset.topics.split(',').map(t => t.trim());
      const matches = topics.includes(topicParam);
      card.hidden = !matches;
    });
    label = 'Filtered by topic: ' + topicParam;
  }
  summary.textContent = label;
})();
</script>
